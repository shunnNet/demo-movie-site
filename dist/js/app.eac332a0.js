(function(t){function e(e){for(var i,s,r=e[0],l=e[1],c=e[2],d=0,p=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/dist/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"141a":function(t,e,n){},"29cd":function(t,e,n){"use strict";var i=n("abb1"),a=n.n(i);a.a},"2f50":function(t,e,n){},"3d3d":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("eaf9"),n("e40d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box-full",attrs:{id:"app"}},[n("loading",{attrs:{loader:"spinner",active:t.waitAjax,"can-cancel":!1,"is-full-page":!0},on:{"update:active":function(e){t.waitAjax=e}}}),n("head-nav",{staticClass:"box-stickyNav bg-body z-2"}),n("main",{staticClass:"main box-lg"},[t.waitAjax?t._e():n("router-view",{attrs:{recommend:t.recommend,pool:t.recommend,collection:t.collection,waitAjax:t.waitAjax}})],1)],1)},o=[],s=(n("ac1f"),n("5319"),n("9911"),n("a4d3"),n("e01a"),n("d81d"),n("d3b7"),n("2909")),r=(n("96cf"),n("1da1")),l={data:function(){return{instanceYT:{},targetItmCount:100,itmPerPage:50}},created:function(){this.instanceYT=this.$http.create({baseUrl:"https://www.googleapis.com/youtube/v3/",timeout:1e4,validateStatus:function(){return!0}})},methods:{ytGetList:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=[],i=Math.ceil(t.targetItmCount/t.itmPerPage),console.log(i,"start");case 3:if(!(i>0)){e.next=11;break}return e.next=6,t.instanceYT.get("https://www.googleapis.com/youtube/v3/videos?part=player,snippet,contentDetails&chart=mostPopular&maxResults=50&key=AIzaSyBc6FQEAEGSg6V6iacMVWXgoTi3GgMJjek").then((function(e){return t.ajaxHandleResponse(e)})).then((function(e){return t.transformData(e)}));case 6:a=e.sent,n.push.apply(n,Object(s["a"])(a)),i--,e.next=3;break;case 11:return console.log(n.length),e.abrupt("return",n);case 13:case"end":return e.stop()}}),e)})))()},ajaxHandleResponse:function(t){var e=t.status>=200&&t.status<300;return e?Promise.resolve(t.data):(console.log(t),Promise.reject(t.status))},transformData:function(t){return t.items.map((function(t){return{id:t.id,link:"/theater/".concat(t.id),heading:t.snippet.title,tags:t.snippet.tags,desc:t.snippet.description,thumbnails:t.snippet.thumbnails,duration:t.contentDetails.duration}}))}}},c=n("9062"),u=n.n(c),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",[n("ul",{staticClass:"menu menu--primary"},[n("li",{staticClass:"menu__list"},[n("router-link",{staticClass:"menu__list__item",attrs:{to:"/index"}},[t._v(" 首頁 ")])],1),n("li",{staticClass:"menu__list"},[n("router-link",{staticClass:"menu__list__item",attrs:{to:"/collection"}},[t._v(" 收藏 ")])],1)])])},p=[],m={name:"head-nav"},f=m,h=(n("629a"),n("2877")),_=Object(h["a"])(f,d,p,!1,null,null,null),v=_.exports,g={data:function(){return{recommend_proto:[],viewMode:"Card",waitAjax:!0,videoOptions:{autoplay:!0,controls:!0,sources:[{src:"/public/video.m3u8",type:"application/x-mpegURL"}]},collection:null}},mixins:[l],created:function(){var t=this;this.initCollection(),this.getData(),this.$bus.$on("collect",(function(e,n){t.collect(e),n.collected=!0,e.collected=!0,e.link+="?list=mylist",console.log(e.link)})),this.$bus.$on("uncollect",(function(e,n){t.uncollect(e),n.collected=!1,e.collected=!1,e.link.replace("?list=mylist","")}))},watch:{collection:function(t){console.log(t,"watch"),localStorage.setItem("collection",JSON.stringify(t))}},components:{headNav:v,Loading:u.a},computed:{recommend:function(){for(var t=[],e=this.recommend_proto,n=0,i=e.length;n<i;n++){var a=JSON.parse(JSON.stringify(e[n]));a.collected=void 0!==this.collection[a.id],t.push(a)}return t}},methods:{getData:function(){var t=this;this.ytGetList().then((function(e){t.recommend_proto=e,t.waitAjax=!1}))},initCollection:function(){var t=localStorage.getItem("collection");t=t?JSON.parse(t):{},this.collection=t},collect:function(t){console.log("collect"),this.$set(this.collection,t.id,t)},uncollect:function(t){console.log("uncollect"),this.$delete(this.collection,t.id)}}},b=g,y=(n("5c0b"),Object(h["a"])(b,a,o,!1,null,null,null)),x=y.exports,C=n("8c4f"),w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("section",{key:"標題",staticClass:"d-flex f-main-center pd-t-500 pd-b-500"},[n("h2",{staticClass:"display-1 display-3-pad color-main"},[t._v("蒐集所有的影音吧!")])]),t.underPad?n("ul",{staticClass:"grid min-h-300"},t._l(t.recommend,(function(t){return n("li",{staticClass:"grid__u__1-2-pad grid__u__1-1-mb"},[n("flyer",{tag:"component",attrs:{movie:t}})],1)})),0):n("list",{attrs:{pool:t.recommend,loading:t.waitAjax}})],1)},j=[],O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"list"},[n("h3",{staticClass:"list__title"},[t._v(" 真心推薦 ")]),n("ul",{staticClass:"grid"},t._l(t.onAir,(function(t){return n("li",{staticClass:"grid__u__1-4 grid__u__1-3-scr grid__u__1-2-pad grid__u__1-1-mb"},[n("flyer",{tag:"component",attrs:{movie:t}})],1)})),0),n("paginate",{attrs:{"page-count":t.pageCount,"page-range":3,"margin-pages":1,"prev-text":"Prev","next-text":"Next","container-class":"pagi","active-class":"pagi__item--active","page-link-class":"pagi__item","prev-link-class":"pagi__item","next-link-class":"pagi__item"},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)},P=[],k=(n("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"flyer flyer--main"},[n("router-link",{staticClass:"flyer__body",attrs:{to:t.movie.link}},[n("thunmbnail",{staticClass:"flyer__body__thunmb",attrs:{imgsrc:t.movie.thumbnails.high.url,duration:t.movie.duration}}),n("Info",{staticClass:"flyer__body__content",attrs:{heading:t.movie.heading,owner:t.movie.owner,desc:t.movie.desc}})],1),n("div",{staticClass:"flyer__tool-RB"},[n("collect",{attrs:{movie:t.movie}})],1)],1)}),$=[],A={props:{movie:Object}},L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("figure",{staticClass:"thunmbnail pos-r"},[n("img",{attrs:{src:t.imgsrc}}),n("div",{staticClass:"pos-a bg-sub b-0 r-0 pd-050"},[t._v(t._s(t.time))])])},E=[],S=(n("4de4"),n("a15b"),n("466d"),{name:"thunmbnail",props:["imgsrc","duration"],computed:{time:function(){var t=this.duration.match(/P([0-9]*)T*([0-9]*)M*([0-9]*)S*/);return t[1]=t[1]?t[1]+"d":"",t[2]=t[2]?t[2]:"0",t[3]=t[3]?t[3]:"00",t[3]=2===t[3].length?t[3]:"0"+t[3],t.slice(1,4).filter((function(t){return t})).join(":")}}}),M=S,T=Object(h["a"])(M,L,E,!1,null,null,null),I=T.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"info"},[n("h4",{staticClass:"info__title"},[t._v(" "+t._s(t.heading)+" ")]),n("p",{staticClass:"info__subTitle"},[t._v(" "+t._s(t.owner)+" ")]),n("p",{staticClass:"info__desc"},[t._v(" "+t._s(t.desc)+" ")])])},R=[],J={name:"info",props:["heading","owner","desc"]},D=J,B=(n("aca9"),Object(h["a"])(D,N,R,!1,null,null,null)),G=B.exports,V=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:t.classObj,on:{click:function(e){return t.collect()}}},[t.movie.collected?n("span",[t._v(" 取消收藏 ")]):n("span",[t._v(" 收藏 ")])])},z=[],F={name:"collect",props:["movie"],computed:{classObj:function(){return{"btn--main":!this.movie.collected,"btn--sub":this.movie.collected}}},methods:{collect:function(t){var e=this.movie.collected?"uncollect":"collect";this.$bus.$emit(e,this.movie,this)}}},U=F,Y=Object(h["a"])(U,V,z,!1,null,null,null),H=Y.exports,q={inheritAttrs:!1,name:"flyer",mixins:[A],components:{thunmbnail:I,Info:G,Collect:H},methods:{doSome:function(){this.$bus.$emit("asc","Alert MSG")}}},Q=q,W=(n("e694"),Object(h["a"])(Q,k,$,!1,null,null,null)),X=W.exports,K=n("8832"),Z=n.n(K),tt={name:"list",data:function(){return{page:1,itemPerPage:16}},props:{pool:{type:Array,default:[]},loading:{type:Boolean,default:!0}},computed:{onAir:function(){var t=this.itemPerPage*(this.page-1),e=this.itemPerPage*this.page;return this.pool.slice(t,e)},pageCount:function(){return console.log(Math.ceil(this.pool.length/this.itemPerPage)),Math.ceil(this.pool.length/this.itemPerPage)}},components:{Paginate:Z.a,Flyer:X}},et=tt,nt=(n("cd96"),Object(h["a"])(et,O,P,!1,null,null,null)),it=nt.exports,at={inheritAttrs:!1,name:"index",data:function(){return{underPad:!1}},components:{List:it,Flyer:X},props:["recommend","waitAjax"],created:function(){var t=matchMedia("(max-width : 48em)");this.underPad=t.matches;var e=this;t.addListener((function(t){e.underPad=this.matches}))}},ot=at,st=Object(h["a"])(ot,w,j,!1,null,null,null),rt=st.exports,lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"box-md pos-r"},[n("h3",{staticClass:"h2 bd-b--contrast mg-b-100"},[t._v("我的收藏")]),n("transition",{attrs:{name:"fade",mode:"out-in"}},[t.listLengh>0?n("transition-group",{staticClass:"grid",attrs:{tag:"ul",name:"fade",appear:""}},t._l(t.collectionPlayList,(function(t){return n("li",{key:t.id,staticClass:"grid__u__1-1"},[n("card",{tag:"component",attrs:{movie:t}})],1)})),0):n("p",{key:"showIfNoMovieCollection",staticClass:"fz-120 fs-italic text-center"},[t._v(" 您尚未收藏任何影音 ")])],1)],1)},ct=[],ut=(n("b64b"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"card card--main"},[n("router-link",{staticClass:"card__body",attrs:{to:t.movie.link}},[n("thunmbnail",{staticClass:"card__body__thunmb-L",attrs:{imgsrc:t.movie.thumbnails.default.url,duration:t.movie.duration}}),n("Info",{staticClass:"card__body__content",attrs:{heading:t.movie.heading,owner:t.movie.owner,desc:t.movie.desc}})],1),n("div",{staticClass:"card__tool-RB"},[n("collect",{attrs:{movie:t.movie}})],1)],1)}),dt=[],pt={inheritAttrs:!1,name:"card",mixins:[A],components:{thunmbnail:I,Info:G,Collect:H}},mt=pt,ft=(n("29cd"),Object(h["a"])(mt,ut,dt,!1,null,null,null)),ht=ft.exports,_t={inheritAttrs:!1,name:"collection",props:{collection:{type:Object,default:{}},waitAjax:{type:Boolean,default:!0}},components:{Card:ht,Loading:u.a},computed:{collectionPlayList:function(){var t=JSON.parse(JSON.stringify(this.collection));return t},listLengh:function(){return Object.keys(this.collectionPlayList).length}}},vt=_t,gt=Object(h["a"])(vt,lt,ct,!1,null,null,null),bt=gt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"grid",attrs:{id:"player"}},[n("div",{staticClass:"grid__u__2-3 grid__u__1-1-pad pd-200"},[n("video-player",{staticClass:"mg-b-100",attrs:{options:t.videoOptions}}),n("info-detail",{attrs:{heading:t.onAir.heading,owner:t.onAir.owner,desc:t.onAir.desc}})],1),n("div",{staticClass:"grid__u__1-3 grid__u__1-1-pad"},["mylist"===t.$route.query.list?n("div",{staticClass:"playlist"},[n("ul",t._l(t.collection,(function(t){return n("li",{key:t.id},[n("card",{tag:"component",attrs:{movie:t}})],1)})),0)]):t._e(),n("ul",t._l(t.playList,(function(t){return n("li",{key:t.id},[n("card",{tag:"component",attrs:{movie:t}})],1)})),0)])])},xt=[],Ct=(n("7db0"),n("c740"),n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("video",{ref:"videoPlayer",staticClass:"video-js"})])}),wt=[],jt=n("f0e2"),Ot={name:"VideoPlayer",props:{options:{type:Object,default:function(){return{}}}},data:function(){return{player:null}},mounted:function(){this.player=Object(jt["a"])(this.$refs.videoPlayer,this.options,(function(){console.log("onPlayerReady",this)}))},beforeDestroy:function(){this.player&&this.player.dispose()}},Pt=Ot,kt=(n("2272"),Object(h["a"])(Pt,Ct,wt,!1,null,null,null)),$t=kt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"detail"},[n("h4",{staticClass:"detail__title"},[t._v(" "+t._s(t.heading)+" ")]),n("p",{staticClass:"detail__desc"},[t._v(" "+t._s(t.desc)+" ")])])},Lt=[],Et={name:"info-detail",props:["heading","owner","desc"]},St=Et,Mt=(n("a9b2"),Object(h["a"])(St,At,Lt,!1,null,null,null)),Tt=Mt.exports,It={inheritAttrs:!1,name:"theater",data:function(){return{listLimit:16,videoOptions:{autoplay:!0,controls:!0,sources:[{src:"https://bitdash-a.akamaihd.net/content/MI201109210084_1/m3u8s/f08e80da-bf1d-4e3d-8899-f0f6155f6efa.m3u8",type:"application/x-mpegURL"}]}}},props:["pool","collection"],computed:{playListTotal:function(){var t=this.$route.params.id,e=this.pool.map((function(t){return t})),n=e.findIndex((function(e){return e.id===t}));return e.splice(n,1),e},playList:function(){return this.playListTotal.slice(0,this.listLimit)},onAir:function(){var t=this.$route.params.id;return this.collection[t]?this.collection[t]:this.pool.find((function(e){return e.id===t}))}},created:function(){var t=document.scrollingElement||document.documentElement;t.scrollTo(0,0)},watch:{$route:function(){var t=document.scrollingElement||document.documentElement;t.scrollTo(0,0)}},components:{VideoPlayer:$t,Card:ht,infoDetail:Tt}},Nt=It,Rt=(n("fb60"),Object(h["a"])(Nt,yt,xt,!1,null,null,null)),Jt=Rt.exports;i["a"].use(C["a"]);var Dt=[{path:"/index",component:rt},{path:"/collection",component:bt},{path:"/theater/:id",component:Jt},{path:"*",redirect:"/index"}],Bt=new C["a"]({routes:Dt}),Gt=Bt,Vt=n("bc3a"),zt=n.n(Vt),Ft=n("a7fe"),Ut=n.n(Ft);n("2f50");i["a"].prototype.$bus=new i["a"],i["a"].config.productionTip=!1,i["a"].use(Ut.a,zt.a),new i["a"]({router:Gt,render:function(t){return t(x)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var i=n("9c0c"),a=n.n(i);a.a},"629a":function(t,e,n){"use strict";var i=n("de3a"),a=n.n(i);a.a},"75ed":function(t,e,n){},"9c0c":function(t,e,n){},a9b2:function(t,e,n){"use strict";var i=n("75ed"),a=n.n(i);a.a},abb1:function(t,e,n){},aca9:function(t,e,n){"use strict";var i=n("3d3d"),a=n.n(i);a.a},b4f6:function(t,e,n){},cd96:function(t,e,n){"use strict";var i=n("b4f6"),a=n.n(i);a.a},d63e:function(t,e,n){},de3a:function(t,e,n){},e694:function(t,e,n){"use strict";var i=n("d63e"),a=n.n(i);a.a},eaf9:function(t,e,n){},fb60:function(t,e,n){"use strict";var i=n("141a"),a=n.n(i);a.a}});
//# sourceMappingURL=app.eac332a0.js.map